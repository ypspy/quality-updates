# PDF·원문 처리 상세 지침

## PDF 처리

`scripts/extract_pdf.py` 사용. 경로는 `scripts/pdf_path.txt`에 UTF-8로 한 줄 저장 후 실행. 출력: `scripts/pdf_extracted.txt`. `pypdf` 미설치 시 `pip install pypdf`. 블록 안에 PDF URL 불포함.

## PDF 경로 결정 (아래 순서로 적용)

1. **경로 지정 시**: 사용자가 경로를 지정한 경우 해당 경로의 PDF 사용.
2. **요약 지시 시 — 동일 명칭 PDF 우선 확인**: `downloads/*.pdf`에서 링크 제목·보도자료 제목 키워드가 파일명에 포함된 PDF 검색. 매칭 시 사용, 없으면 다음 단계.
3. **미지정 + "관련 PDF" 요청 시**: `downloads/1.pdf` 사용. 없거나 접근 불가 시 사용자에게 경로 확인 요청.
4. **미지정 + "최근 PDF" 요청 시**: `downloads/` 폴더에서 수정일 기준 최근 PDF 사용(`downloads/*.pdf` glob 또는 터미널 조회). 0건이면 경로 지정 요청.

## 경로 인코딩 이슈

파일명에 날짜 따옴표(`'25.8.27.`) 등 특수 유니코드(U+2019)가 있으면 `FileNotFoundError` 발생 가능. 스크립트는 실패 시 날짜 접두어(`250827*.pdf`) 패턴으로 glob 검색 후 첫 매칭 파일 사용 — 경로 그대로 저장 후 실행해도 fallback으로 추출 시도함.

## 기타 원문 처리

- **HWP**: 수동으로 PDF 변환 후 PDF 추출 워크플로우 사용.
- **증선위·금융위 조사·감리 조치 보도자료**: 웹 페이지만으로는 Type B 상세 불충분. **붙임(PDF/HWP)** 반드시 확인.
- **한글 경로**: 셸 인코딩 이슈로 한글 경로 직접 전달 시 깨질 수 있음. 경로를 UTF-8 텍스트 파일에 저장 후 스크립트 path 파일 사용.
