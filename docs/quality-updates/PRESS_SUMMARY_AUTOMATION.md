# 보도자료 PDF 요약 자동화 가능성

## 요약

- **결론**: 보도자료 PDF를 읽어 해당 마크다운 항목에 `!!! note "주요 내용"` 요약을 넣는 작업은 **반자동·자동화 모두 가능**함.
- **권장**: 우선 **반자동 스크립트**(PDF 경로 + 대상 항목 지정)를 두고, 이후 크롤러·배치와 연동할 수 있음.

---

## 작업 분해

| 단계 | 내용 | 자동화 난이도 |
|------|------|----------------|
| 1. PDF 텍스트 추출 | 보도자료 PDF에서 본문 추출 | 보통 (한글 PDF 레이아웃·공백 이슈 가능) |
| 2. 요약 생성 | 주요 내용·시사점을 불릿 형태로 축약 | 가능 (규칙 기반 또는 LLM) |
| 3. 대상 항목 매칭 | “이 PDF”를 “어느 마크다운 링크”에 붙일지 결정 | 사용자 지정 또는 메타데이터(날짜·제목) 매칭 |
| 4. 삽입 | 고정 포맷(`!!! note` 블록)으로 마크다운에 삽입 | 쉬움 |

---

## 자동화 방안

### 1) 반자동 스크립트 (우선 구현 권장)

**입력**

- 보도자료 PDF 파일 경로
- 대상 마크다운 파일 경로
- 대상 지정: **줄 번호** 또는 **링크 텍스트/URL** (예: `2023사업연도 회계법인 사업보고서 분석결과`)

**처리**

1. PDF에서 텍스트 추출 (PyMuPDF, pdfplumber 등)
2. 요약 생성
   - **규칙 기반**: 「주요 내용」「시사점」 등 섹션을 찾아 리스트로 정리
   - **LLM**: 프롬프트로 “주요 내용 불릿 5~7개, 시사점 1~2문장” 형태로 생성
3. 해당 리스트 항목 **다음 줄**에 `!!! note "주요 내용"` 블록 삽입 (이미 있으면 스킵 또는 덮어쓰기 옵션)

**특징**

- 사람이 “이 PDF → 이 항목”만 지정하면 됨.
- FSS/금융위 등 보도자료 형식이 다르더라도, 스크립트 하나로 통일된 포맷 적용 가능.

### 2) 크롤러 연동 (전체 파이프라인)

- 크롤러가 게시물 목록을 수집할 때 **첨부 PDF URL** 또는 **본문 URL**을 함께 저장.
- 분기별 마크다운 생성 시 “요약 없는 항목”을 찾고, 해당 URL에서 PDF/HTML을 가져와 요약 생성 후 삽입.
- **필요 조건**: 크롤러 출력에 “항목별 원문 URL/PDF URL” 포함, “요약 유무” 판별 로직.

### 3) 배치 처리

- 특정 폴더(예: `downloads/2024-Q4/`)에 PDF를 넣고, 파일명 또는 메타데이터(날짜+제목)로 마크다운 항목과 매칭 후 일괄 요약 삽입.

---

## 기술 포인트

- **PDF 추출**: `pymupdf`, `pdfplumber` 등. 한글 폰트/레이아웃에 따라 글자 사이 공백이 많이 나올 수 있어, 후처리(공백 정규화) 필요할 수 있음.
- **요약 품질**: 보도자료는 “주요 내용”“시사점” 등 구조가 비슷하므로, 섹션별 파싱 + 짧은 규칙으로도 가능. 더 유연하게 하려면 LLM API 사용.
- **마크다운 편집**: “해당 `- (날짜) [제목](url)` 라인 다음”에만 삽입하므로, 줄 단위 삽입으로 구현 가능.

---

## 제약·리스크

- **PDF 품질**: 이미지 PDF는 OCR 필요.
- **형식 다양성**: 기관·유형별로 제목/부제 구조가 달라, 하나의 규칙으로 모두 커버하려면 예외 처리 또는 LLM 도입이 유리함.
- **매칭 오류**: 자동 매칭 시 “날짜+제목”이 겹치거나 바뀌면 잘못된 항목에 요약이 들어갈 수 있음. 반자동(사용자 지정)이 안전함.

---

## 다음 단계 제안

1. **반자동 CLI/스크립트**  
   - 인자: `--pdf`, `--md`, `--line` 또는 `--link="제목 일부"`  
   - 출력: 요약 블록 생성 후 해당 위치에 삽입 (드라이런 옵션 권장).
2. **요약 포맷 규칙**  
   - `SUMMARY_INSTRUCTION.md` 또는 이 문서에 “보도자료 한 건 요약” 포맷(불릿 개수, 시사점 포함 여부 등)을 명시해 스크립트·LLM이 동일하게 따르게 함.
3. **(선택)** 크롤러가 “원문/PDF 링크”를 저장하도록 하면, 이후 “요약 없는 항목만 PDF 다운로드 → 요약 → 삽입” 파이프라인으로 확장 가능.
